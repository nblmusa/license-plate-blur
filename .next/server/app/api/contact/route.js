"use strict";(()=>{var e={};e.id=386,e.ids=[386],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},52864:e=>{e.exports=require("bufferutil")},2239:e=>{e.exports=require("utf-8-validate")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},45836:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>v,requestAsyncStorage:()=>d,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x,staticGenerationBailout:()=>q});var s={};r.r(s),r.d(s,{POST:()=>p}),r(95655);var o=r(83323),a=r(54647),n=r(66886),i=r(17207),u=r(59859);async function c(e){let t=await fetch("https://www.google.com/recaptcha/api/siteverify",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`secret=${process.env.RECAPTCHA_SECRET_KEY}&response=${e}`}),r=await t.json();return r.success}async function p(e){try{let t=await e.formData(),r=t.get("firstName"),s=t.get("lastName"),o=t.get("email"),a=t.get("subject"),p=t.get("message"),l=t.get("recaptchaToken");if(!r||!s||!o||!a||!p||!l)return n.Z.json({error:"All fields are required"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.toString()))return n.Z.json({error:"Invalid email format"},{status:400});let m=await c(l.toString());if(!m)return n.Z.json({error:"Invalid reCAPTCHA. Please try again."},{status:400});let d=(0,i.createRouteHandlerClient)({cookies:u.cookies}),{error:x}=await d.from("contact_submissions").insert([{first_name:r,last_name:s,email:o,subject:a,message:p,status:"new"}]);if(x)return console.error("Failed to store contact submission:",x),n.Z.json({error:"Failed to submit contact form"},{status:500});return n.Z.json({message:"Contact form submitted successfully"})}catch(e){return console.error("Contact form error:",e),n.Z.json({error:"Failed to process contact form"},{status:500})}}let l=o.AppRouteRouteModule,m=new l({definition:{kind:a.x.APP_ROUTE,page:"/api/contact/route",pathname:"/api/contact",filename:"route",bundlePath:"app/api/contact/route"},resolvedPagePath:"/Users/nabilmusa/development/license-plate-masking/app/api/contact/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:x,serverHooks:f,headerHooks:g,staticGenerationBailout:q}=m,v="/api/contact/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4650,4856,9790],()=>r(45836));module.exports=s})();