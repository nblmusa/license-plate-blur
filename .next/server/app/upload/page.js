(()=>{var e={};e.id=5676,e.ids=[5676],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},52864:e=>{"use strict";e.exports=require("bufferutil")},2239:e=>{"use strict";e.exports=require("utf-8-validate")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},4465:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>m,routeModule:()=>p,tree:()=>c});var a=t(73137),r=t(54647),i=t(4183),l=t.n(i),n=t(71775),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=a.AppPageRouteModule,c=["",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,67085)),"/Users/nabilmusa/development/license-plate-masking/app/upload/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,82285)),"/Users/nabilmusa/development/license-plate-masking/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],m=["/Users/nabilmusa/development/license-plate-masking/app/upload/page.tsx"],x="/upload/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new o({definition:{kind:r.x.APP_PAGE,page:"/upload/page",pathname:"/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},19841:(e,s,t)=>{Promise.resolve().then(t.bind(t,62266))},62266:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>es});var a=t(60080),r=t(9885),i=t(45086),l=t(68384),n=t(97052),d=t(52126),o=t(71600),c=t(44901),m=t(79803),x=t(6315),u=t(7805),p=t(56206),h=t(5987),g=t(80443),f=t(85574),j=t(5705),v=t(23294),N=t(52451),y=t.n(N),b=t(87502),w=t(11440),k=t.n(w),C=t(6643),S=t(66698),z=t(33478),P=t(70345),Z=t(23161);let _=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(P.fC,{ref:t,className:(0,Z.cn)("relative flex w-full touch-none select-none items-center",e),...s,children:[a.jsx(P.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(P.e6,{className:"absolute h-full bg-primary"})}),a.jsx(P.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));_.displayName=P.fC.displayName;var D=t(14291),q=t(19458),E=t(4678),R=t(1264);let L=D.fC;D.ZA;let $=D.B4,F=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(D.xz,{ref:r,className:(0,Z.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(D.JO,{asChild:!0,children:a.jsx(q.Z,{className:"h-4 w-4 opacity-50"})})]}));F.displayName=D.xz.displayName;let T=r.forwardRef(({className:e,...s},t)=>a.jsx(D.u_,{ref:t,className:(0,Z.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(E.Z,{className:"h-4 w-4"})}));T.displayName=D.u_.displayName;let A=r.forwardRef(({className:e,...s},t)=>a.jsx(D.$G,{ref:t,className:(0,Z.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(q.Z,{className:"h-4 w-4"})}));A.displayName=D.$G.displayName;let M=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>a.jsx(D.h_,{children:(0,a.jsxs)(D.VY,{ref:i,className:(0,Z.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(T,{}),a.jsx(D.l_,{className:(0,Z.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(A,{})]})}));M.displayName=D.VY.displayName;let U=r.forwardRef(({className:e,...s},t)=>a.jsx(D.__,{ref:t,className:(0,Z.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s}));U.displayName=D.__.displayName;let I=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(D.ck,{ref:r,className:(0,Z.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(D.wU,{children:a.jsx(R.Z,{className:"h-4 w-4"})})}),a.jsx(D.eT,{children:s})]}));I.displayName=D.ck.displayName;let K=r.forwardRef(({className:e,...s},t)=>a.jsx(D.Z0,{ref:t,className:(0,Z.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));K.displayName=D.Z0.displayName;var V=t(49424),B=t(7589);let O=B.fC,G=B.xz,W=B.h_;B.x8;let H=r.forwardRef(({className:e,...s},t)=>a.jsx(B.aV,{ref:t,className:(0,Z.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));H.displayName=B.aV.displayName;let Y=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(W,{children:[a.jsx(H,{}),(0,a.jsxs)(B.VY,{ref:r,className:(0,Z.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(B.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(p.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Y.displayName=B.VY.displayName;let Q=({className:e,...s})=>a.jsx("div",{className:(0,Z.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});Q.displayName="DialogHeader";let J=r.forwardRef(({className:e,...s},t)=>a.jsx(B.Dx,{ref:t,className:(0,Z.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));J.displayName=B.Dx.displayName;let X=r.forwardRef(({className:e,...s},t)=>a.jsx(B.dk,{ref:t,className:(0,Z.cn)("text-sm text-muted-foreground",e),...s}));X.displayName=B.dk.displayName;var ee=t(43334);function es(){let[e,s]=(0,r.useState)(null),[t,N]=(0,r.useState)(null),[w,P]=(0,r.useState)(null),[Z,D]=(0,r.useState)(!1),[q,E]=(0,r.useState)(0),[R,T]=(0,r.useState)(!1),[A,U]=(0,r.useState)(!1),[K,B]=(0,r.useState)({position:"center",size:100,opacity:100}),[W,H]=(0,r.useState)([]),[X,es]=(0,r.useState)(!1),{toast:et}=(0,b.pm)(),[ea,er]=(0,r.useState)({confidenceThreshold:.5,borderColor:"#ffffff",borderWidth:2,maskingStyle:"blur",blurStrength:20,solidColor:"#000000",pixelateSize:10}),[ei,el]=(0,r.useState)(0),[en,ed]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=(0,ee.createClientComponentClient)(),s=async()=>{let{data:{session:s}}=await e.auth.getSession();U(!!s)};s();let{data:{subscription:t}}=e.auth.onAuthStateChange((e,s)=>{U(!!s)});return()=>{t.unsubscribe()}},[]);let eo=(0,r.useCallback)(async()=>{if(X||0===W.length)return;es(!0);let e=[...W];for(let s=0;s<e.length;s++){let a=e[s];if("pending"===a.status)try{e=e.map((e,t)=>t===s?{...e,status:"processing"}:e),H(e);let r=await new Promise((e,s)=>{let t=new FileReader;t.onload=t=>{let a=t.target?.result;"string"==typeof a?e(a):s(Error("Failed to read file"))},t.onerror=()=>s(Error("Failed to read file")),t.readAsDataURL(a.file)}),[i,l]=r.split(","),n=i.split(";")[0].split(":")[1],d={image:l,filename:a.file.name,contentType:n,processingOptions:ea,isAuthenticated:A};if(R&&t){let[,e]=t.split(",");e&&(d.logo=e,d.logoSettings=K)}let o=await fetch("/api/process-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!o.ok){let e=await o.json();throw Error(e.error||"Failed to process image")}let c=await o.json();if(!c.maskedImage)throw Error("No masked image returned from API");ed(e=>[{id:Math.random().toString(36).slice(2),filename:a.file.name,timestamp:new Date().toISOString(),settings:{...ea},logoSettings:R?{...K}:void 0,usedLogo:R,detections:c.metadata.licensePlatesDetected},...e.slice(0,9)]),e=e.map((e,t)=>t===s?{...e,status:"completed",progress:100,result:c.maskedImage}:e),H(e),0===s&&P(c.maskedImage),et({title:`Processed ${a.file.name}`,description:`License plate${c.metadata.licensePlatesDetected>1?"s":""} masked successfully.${A?"":" (Free Version - Watermark Added)"}`})}catch(t){H(e=e.map((e,a)=>a===s?{...e,status:"error",error:t instanceof Error?t.message:"Failed to process image"}:e)),et({title:`Error processing ${a.file.name}`,description:t instanceof Error?t.message:"Failed to process image",variant:"destructive"})}}es(!1)},[W,X,t,K,R,ea,et,A]);(0,r.useEffect)(()=>{eo()},[W,eo]);let ec=(0,r.useCallback)(async e=>{if(0===e.length)return;let t=e.reduce((e,s)=>e+s.size,0);el(e=>e+t);let a=e[0],r=new FileReader;r.onload=e=>{let t=e.target?.result;"string"==typeof t&&s(t)},r.readAsDataURL(a);let i=e.map(e=>({id:Math.random().toString(36).slice(2),file:e,status:"pending",progress:0}));H(e=>[...e,...i]),et({title:"Files added to queue",description:`Added ${e.length} file${e.length>1?"s":""} to processing queue.`})},[et]),em=(0,r.useCallback)(async e=>{if(0===e.length)return;let s=e[0];if(!["image/png","image/webp"].includes(s.type)){et({title:"Error",description:"Logo must be PNG or WebP format with transparency",variant:"destructive"});return}if(s.size>2097152){et({title:"Error",description:"Logo file size must be less than 2MB",variant:"destructive"});return}let t=new FileReader;t.onload=e=>{let s=e.target?.result;if("string"==typeof s){let e=document.createElement("img");e.onload=()=>{N(s),T(!0),et({title:"Logo uploaded successfully",description:"Your logo has been added and will be used for masking."}),W.length>0&&eo()},e.src=s}},t.onerror=()=>{et({title:"Error",description:"Failed to read logo file",variant:"destructive"})},t.readAsDataURL(s)},[et,eo,W.length]),{getRootProps:ex,getInputProps:eu,isDragActive:ep}=(0,i.uI)({onDrop:ec,accept:{"image/*":[".jpeg",".jpg",".png",".webp"]},multiple:!0}),{getRootProps:eh,getInputProps:eg,isDragActive:ef}=(0,i.uI)({onDrop:em,accept:{"image/png":[".png"],"image/webp":[".webp"]},multiple:!1,maxSize:2097152}),ej=(0,r.useCallback)(()=>{let e=W.filter(e=>"completed"===e.status&&e.result);e.forEach(e=>{let s=document.createElement("a");s.href=e.result,s.download=`masked-${e.file.name}`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}),e.length>0&&et({title:"Download started",description:`Downloading ${e.length} processed image${e.length>1?"s":""}.`})},[W,et]),ev=(0,r.useCallback)(()=>{H(e=>e.filter(e=>"completed"!==e.status)),et({title:"Queue cleared",description:"Completed items removed from queue."})},[et]);return(0,r.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){if((e.ctrlKey||e.metaKey)&&"u"===e.key){e.preventDefault();let s=document.querySelector('input[type="file"]');s&&s.click()}if((e.ctrlKey||e.metaKey)&&"d"===e.key&&(e.preventDefault(),W.some(e=>"completed"===e.status)&&ej()),(e.ctrlKey||e.metaKey)&&"l"===e.key){e.preventDefault();let s=document.querySelector('input[accept="image/png,image/webp"]');s&&s.click()}if((e.ctrlKey||e.metaKey)&&"t"===e.key&&(e.preventDefault(),T(e=>!e)),(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),W.some(e=>"completed"===e.status)&&ev()),"?"===e.key&&!e.ctrlKey&&!e.metaKey){e.preventDefault();let s=document.querySelector('[title="Keyboard Shortcuts"]');s&&s.click()}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[W,ej,ev]),(0,a.jsxs)("div",{className:"min-h-screen bg-muted/30",children:[a.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-sm border-b",children:a.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(l.z,{variant:"ghost",size:"icon",asChild:!0,className:"shrink-0",children:a.jsx(k(),{href:"/",children:a.jsx(m.Z,{className:"h-5 w-5"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Upload Image"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload an image to automatically detect and mask license plates"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(function(){return(0,a.jsxs)(O,{children:[a.jsx(G,{asChild:!0,children:a.jsx(l.z,{variant:"ghost",size:"icon",className:"absolute top-4 right-16",title:"Processing History",children:a.jsx(o.Z,{className:"h-5 w-5"})})}),(0,a.jsxs)(Y,{className:"max-w-2xl",children:[a.jsx(Q,{children:a.jsx(J,{children:"Processing History"})}),a.jsx("div",{className:"space-y-4",children:0===en.length?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No processing history yet"}):a.jsx("div",{className:"space-y-4",children:en.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-medium",children:e.filename}),a.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(e.timestamp).toLocaleString()})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Detection Settings"}),(0,a.jsxs)("ul",{className:"mt-1 space-y-1",children:[(0,a.jsxs)("li",{children:["Confidence: ",100*e.settings.confidenceThreshold,"%"]}),(0,a.jsxs)("li",{children:["Style: ",e.settings.maskingStyle]}),"blur"===e.settings.maskingStyle&&(0,a.jsxs)("li",{children:["Blur: ",e.settings.blurStrength]})]})]}),e.usedLogo&&e.logoSettings&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Logo Settings"}),(0,a.jsxs)("ul",{className:"mt-1 space-y-1",children:[(0,a.jsxs)("li",{children:["Position: ",e.logoSettings.position]}),(0,a.jsxs)("li",{children:["Size: ",e.logoSettings.size,"%"]}),(0,a.jsxs)("li",{children:["Opacity: ",e.logoSettings.opacity,"%"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-2",children:[a.jsx(c.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.detections," license plate",1!==e.detections?"s":""," detected"]})]}),a.jsx(l.z,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>{er(e.settings),e.logoSettings&&(B(e.logoSettings),T(!0)),et({title:"Settings restored",description:"Processing settings have been restored from history."})},children:"Restore These Settings"})]},e.id))})})]})]})},{}),a.jsx(function(){return(0,a.jsxs)(O,{children:[a.jsx(G,{asChild:!0,children:a.jsx(l.z,{variant:"ghost",size:"icon",className:"absolute top-4 right-4",title:"Keyboard Shortcuts",children:a.jsx(d.Z,{className:"h-5 w-5"})})}),(0,a.jsxs)(Y,{children:[a.jsx(Q,{children:a.jsx(J,{children:"Keyboard Shortcuts"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium mb-2",children:"File Operations"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Upload Files"}),a.jsx("kbd",{className:"px-2 py-1 bg-muted rounded text-xs",children:"⌘/Ctrl + U"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Upload Logo"}),a.jsx("kbd",{className:"px-2 py-1 bg-muted rounded text-xs",children:"⌘/Ctrl + L"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Download All"}),a.jsx("kbd",{className:"px-2 py-1 bg-muted rounded text-xs",children:"⌘/Ctrl + D"})]})]})]})}),a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium mb-2",children:"Navigation"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Toggle Logo"}),a.jsx("kbd",{className:"px-2 py-1 bg-muted rounded text-xs",children:"⌘/Ctrl + T"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Clear Queue"}),a.jsx("kbd",{className:"px-2 py-1 bg-muted rounded text-xs",children:"⌘/Ctrl + K"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Show Shortcuts"}),a.jsx("kbd",{className:"px-2 py-1 bg-muted rounded text-xs",children:"?"})]})]})]})})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Note: Some shortcuts may not work if a dialog or input field is focused."})]})]})]})},{})]})]})})}),a.jsx("div",{className:"container mx-auto px-4 py-6",children:a.jsx("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-12 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-5 space-y-6",children:[(0,a.jsxs)(n.Zb,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[a.jsx("div",{className:"p-4 border-b bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"h-5 w-5 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Upload Image"})]})}),a.jsx("div",{className:"p-4",children:(0,a.jsxs)("div",{...ex(),className:`relative border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-all duration-300 ease-in-out
                      ${ep?"border-primary bg-primary/5 scale-[0.98] shadow-inner":"border-muted hover:border-primary/50 hover:bg-muted/50"}`,title:"Upload Files (Ctrl/Cmd + U)",children:[a.jsx("input",{...eu()}),(0,a.jsxs)("div",{className:`transition-transform duration-300 ${ep?"scale-105":""}`,children:[a.jsx("div",{className:`mx-auto mb-4 w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center
                        ${ep?"animate-bounce":"animate-pulse"}`,children:a.jsx(x.Z,{className:"h-6 w-6 text-primary"})}),ep?(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-primary font-medium animate-pulse",children:"Release to upload files"}),a.jsx("p",{className:"text-sm text-primary/80",children:"Your files will be processed automatically"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("p",{className:"font-medium",children:"Drag & drop an image here"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"or click to select a file"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Supported formats: JPEG, PNG, WebP • Max size: 10MB"})]})]})]})})]}),(0,a.jsxs)(n.Zb,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[a.jsx("div",{className:"p-6 border-b bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(u.Z,{className:"h-5 w-5 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Custom Logo (Optional)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(S.r,{checked:R,onCheckedChange:s=>{T(s),e&&eo()},disabled:!t}),a.jsx(z._,{children:"Use Logo"})]})]})}),a.jsx("div",{className:"p-6",children:t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"relative aspect-video bg-muted/50 rounded-lg overflow-hidden",children:a.jsx(y(),{src:t,alt:"Logo",fill:!0,className:"object-contain p-4"})}),a.jsx(l.z,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2",onClick:()=>{N(null),T(!1),eo()},children:a.jsx(p.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{children:"Position"}),(0,a.jsxs)(L,{value:K.position,onValueChange:e=>{B(s=>({...s,position:e})),eo()},children:[a.jsx(F,{children:a.jsx($,{placeholder:"Select position"})}),(0,a.jsxs)(M,{children:[a.jsx(I,{value:"center",children:"Center"}),a.jsx(I,{value:"top-left",children:"Top Left"}),a.jsx(I,{value:"top-right",children:"Top Right"}),a.jsx(I,{value:"bottom-left",children:"Bottom Left"}),a.jsx(I,{value:"bottom-right",children:"Bottom Right"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(z._,{children:"Size"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[K.size,"%"]})]}),a.jsx(_,{value:[K.size],onValueChange:e=>{B(s=>({...s,size:e[0]})),eo()},min:10,max:200,step:5})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(z._,{children:"Opacity"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[K.opacity,"%"]})]}),a.jsx(_,{value:[K.opacity],onValueChange:e=>{B(s=>({...s,opacity:e[0]})),eo()},min:10,max:100,step:5})]})]})]}):(0,a.jsxs)("div",{...eh(),className:`relative border-2 border-dashed rounded-xl p-6 text-center cursor-pointer transition-all
                        ${ef?"border-primary bg-primary/5":"border-muted hover:border-primary/50 hover:bg-muted/50"}`,children:[a.jsx("input",{...eg()}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"mx-auto w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(u.Z,{className:"h-5 w-5 text-primary"})}),a.jsx("p",{className:"font-medium text-sm",children:"Add a custom logo"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG or WebP with transparency • Max size: 2MB"})]})]})})]}),(0,a.jsxs)(n.Zb,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[a.jsx("div",{className:"p-6 border-b bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-5 w-5 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Processing Options"})]})}),a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(z._,{children:"Detection Confidence"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[100*ea.confidenceThreshold,"%"]})]}),a.jsx(_,{value:[100*ea.confidenceThreshold],onValueChange:e=>{er(s=>({...s,confidenceThreshold:e[0]/100})),eo()},min:10,max:100,step:5}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Higher values mean more accurate but fewer detections"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{children:"Masking Style"}),(0,a.jsxs)(L,{value:ea.maskingStyle,onValueChange:e=>{er(s=>({...s,maskingStyle:e})),eo()},children:[a.jsx(F,{children:a.jsx($,{placeholder:"Select masking style"})}),(0,a.jsxs)(M,{children:[a.jsx(I,{value:"blur",children:"Gaussian Blur"}),a.jsx(I,{value:"solid",children:"Solid Color"}),a.jsx(I,{value:"pixelate",children:"Pixelate"})]})]})]}),"blur"===ea.maskingStyle&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(z._,{children:"Blur Strength"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:ea.blurStrength})]}),a.jsx(_,{value:[ea.blurStrength],onValueChange:e=>{er(s=>({...s,blurStrength:e[0]})),eo()},min:5,max:50,step:5})]}),"solid"===ea.maskingStyle&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{children:"Solid Color"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(V.I,{type:"color",value:ea.solidColor,onChange:e=>{er(s=>({...s,solidColor:e.target.value})),eo()},className:"w-20 p-1 h-8"}),a.jsx(V.I,{type:"text",value:ea.solidColor,onChange:e=>{er(s=>({...s,solidColor:e.target.value})),eo()},className:"flex-1"})]})]}),"pixelate"===ea.maskingStyle&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(z._,{children:"Pixel Size"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[ea.pixelateSize,"px"]})]}),a.jsx(_,{value:[ea.pixelateSize],onValueChange:e=>{er(s=>({...s,pixelateSize:e[0]})),eo()},min:5,max:30,step:1})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(z._,{children:"Border Style"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(z._,{children:"Color"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(V.I,{type:"color",value:ea.borderColor,onChange:e=>{er(s=>({...s,borderColor:e.target.value})),eo()},className:"w-20 p-1 h-8"}),a.jsx(V.I,{type:"text",value:ea.borderColor,onChange:e=>{er(s=>({...s,borderColor:e.target.value})),eo()},className:"flex-1"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(z._,{children:"Width"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[ea.borderWidth,"px"]})]}),a.jsx(_,{value:[ea.borderWidth],onValueChange:e=>{er(s=>({...s,borderWidth:e[0]})),eo()},min:0,max:10,step:1})]})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-7 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e&&(0,a.jsxs)(n.Zb,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[a.jsx("div",{className:"p-4 border-b bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(g.Z,{className:"h-5 w-5 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Original"})]})}),a.jsx("div",{className:"relative aspect-[4/3] bg-muted/50",children:a.jsx(y(),{src:e,alt:"Original",fill:!0,className:"object-contain p-4",priority:!0})})]}),w?(0,a.jsxs)(n.Zb,{className:"overflow-hidden transition-shadow hover:shadow-md group",children:[a.jsx("div",{className:"p-4 border-b bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{className:"h-5 w-5 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Masked"})]}),a.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(l.z,{variant:"ghost",size:"sm",onClick:()=>{P(null),eo()},children:"Try Another"})})]})}),(0,a.jsxs)("div",{className:"relative aspect-[4/3] bg-muted/50 group/image",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover/image:opacity-100 transition-opacity"}),a.jsx(y(),{src:w,alt:"Masked",fill:!0,className:"object-contain p-4",priority:!0}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 opacity-0 group-hover/image:opacity-100 transition-opacity",children:(0,a.jsxs)(l.z,{onClick:ej,className:"w-full gap-2",title:"Download All (Ctrl/Cmd + D)",children:[a.jsx(f.Z,{className:"h-4 w-4"}),"Download"]})})]})]}):e?a.jsx(n.Zb,{className:"overflow-hidden transition-shadow hover:shadow-md",children:a.jsx("div",{className:"p-12",children:a.jsx("div",{className:"text-center space-y-6",children:X?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center relative",children:[a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-primary/20 border-t-primary animate-spin"}),a.jsx(c.Z,{className:"h-8 w-8 text-primary animate-pulse"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("p",{className:"font-medium",children:"Processing your images..."}),(0,a.jsxs)("div",{className:"w-full max-w-xs mx-auto relative",children:[a.jsx(C.E,{value:Number(q),className:"h-2"}),(0,a.jsxs)("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 min-w-[4rem] text-sm text-muted-foreground",children:[q,"%"]})]}),a.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:"Detecting and masking license plates"})]})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx("div",{className:"animate-pulse",children:a.jsx(g.Z,{className:"h-8 w-8 text-primary"})})}),a.jsx("p",{className:"text-muted-foreground animate-pulse",children:"Preparing preview..."})]})})})}):null]}),W.length>0&&(0,a.jsxs)(n.Zb,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[a.jsx("div",{className:"p-4 border-b bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"h-5 w-5 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Processing Queue"}),(0,a.jsxs)("div",{className:"ml-2 text-sm text-muted-foreground",children:["(",W.filter(e=>"completed"===e.status).length,"/",W.length,")"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:ev,disabled:!W.some(e=>"completed"===e.status),className:"relative group",children:["Clear Completed",a.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-primary text-[10px] text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:W.filter(e=>"completed"===e.status).length})]}),(0,a.jsxs)(l.z,{size:"sm",onClick:ej,disabled:!W.some(e=>"completed"===e.status),className:"relative group",children:["Download All",a.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-white text-[10px] text-primary rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:W.filter(e=>"completed"===e.status).length})]})]})]})}),a.jsx("div",{className:"divide-y",children:W.map(e=>a.jsx("div",{className:`p-4 transition-all duration-300 ${"completed"===e.status?"hover:bg-primary/5":"error"===e.status?"hover:bg-destructive/5":"hover:bg-muted/50"}`,children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:`flex-1 space-y-2 ${"completed"===e.status?"cursor-pointer hover:opacity-90":""}`,onClick:()=>{"completed"===e.status&&e.result&&P(e.result)},children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:["completed"===e.status&&e.result?(0,a.jsxs)("div",{className:"relative w-12 h-12 rounded-lg bg-muted/50 overflow-hidden shrink-0 ring-1 ring-muted group/thumb",children:[a.jsx(y(),{src:e.result,alt:e.file.name,fill:!0,className:"object-cover transition-transform group-hover/thumb:scale-110"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover/thumb:opacity-100 transition-opacity"})]}):a.jsx("div",{className:"w-12 h-12 rounded-lg bg-muted/50 shrink-0 flex items-center justify-center",children:"processing"===e.status?a.jsx(j.Z,{className:"h-6 w-6 text-primary animate-spin"}):"error"===e.status?a.jsx(p.Z,{className:"h-6 w-6 text-destructive"}):a.jsx(g.Z,{className:"h-6 w-6 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[a.jsx("p",{className:"font-medium truncate",children:e.file.name}),(0,a.jsxs)("span",{className:`text-sm whitespace-nowrap flex items-center gap-1 ${"completed"===e.status?"text-primary":"error"===e.status?"text-destructive":"text-muted-foreground"}`,children:["completed"===e.status&&a.jsx(a.Fragment,{children:"✓ Done"}),"processing"===e.status&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(j.Z,{className:"h-3 w-3 animate-spin"}),"Processing"]}),"error"===e.status&&a.jsx(a.Fragment,{children:"✕ Error"}),"pending"===e.status&&a.jsx(a.Fragment,{children:"⋯ Pending"})]})]}),a.jsx(C.E,{value:e.progress,className:`h-1 ${"completed"===e.status?"bg-primary/20":"error"===e.status?"bg-destructive/20":"bg-muted"}`}),e.error&&a.jsx("p",{className:"text-sm text-destructive mt-1 animate-pulse",children:e.error})]})]}),"completed"===e.status&&a.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to view in preview"})]}),"completed"===e.status&&e.result&&a.jsx(l.z,{size:"sm",variant:"ghost",className:"shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{let s=document.createElement("a");s.href=e.result,s.download=`masked-${e.file.name}`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:a.jsx(f.Z,{className:"h-4 w-4"})})]})},e.id))}),a.jsx("div",{className:"p-4 border-t",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[a.jsx("span",{children:"Total Size"}),(0,a.jsxs)("span",{className:"whitespace-nowrap",children:[(ei/1048576).toFixed(1),"MB / ",10,"MB"]})]}),a.jsx("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${Math.min(ei/10485760*100,100)}%`,backgroundColor:ei>10485760?"var(--destructive)":void 0}})}),ei>10485760&&a.jsx("p",{className:"text-xs text-destructive animate-pulse",children:"Total size exceeds the maximum limit"})]})})]}),a.jsx(n.Zb,{className:"overflow-hidden transition-shadow hover:shadow-md bg-primary/5 border-primary/20",children:a.jsx("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(c.Z,{className:"h-5 w-5 text-primary shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Privacy & Security"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"All images are processed securely and are not stored on our servers. The masked images are generated client-side for your privacy."})]})]})})}),!A&&a.jsx(n.Zb,{className:"p-6 mb-6 bg-primary/5 border-primary/20",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:a.jsx(v.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold mb-1",children:"Free Version - Watermark Applied"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Sign in to remove watermarks and access premium features."}),a.jsx(l.z,{asChild:!0,variant:"outline",size:"sm",children:a.jsx(k(),{href:"/login",children:"Sign In"})})]})]})})]})]})})})]})}},67085:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>d});var a=t(17536);let r=(0,a.createProxy)(String.raw`/Users/nabilmusa/development/license-plate-masking/app/upload/page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,d=n}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4650,5292,9787,3205,7820,8076,6533,7052,2065,6643,6698],()=>t(4465));module.exports=a})();