(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{4566:function(e,t,s){Promise.resolve().then(s.bind(s,6289))},6289:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Y}});var a=s(7437),i=s(3023),r=s(6110),n=s(1908),l=s(6672),o=s(8257),c=s(7579),d=s(7972),u=s(3021),m=s(9036),f=s(5750),h=s(5367),p=s(2405),x=s(8063),g=s(1738),v=s(1271),y=s(5883),j=s(9409),N=s(2265),b=s(6823),w=s(9311);let k=N.forwardRef((e,t)=>{let{className:s,orientation:i="horizontal",decorative:r=!0,...n}=e;return(0,a.jsx)(b.f,{ref:t,decorative:r,orientation:i,className:(0,w.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",s),...n})});k.displayName=b.f.displayName;var C=s(6694);let A=N.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(C.fC,{ref:t,className:(0,w.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...i})});A.displayName=C.fC.displayName;let S=N.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(C.Ee,{ref:t,className:(0,w.cn)("aspect-square h-full w-full",s),...i})});S.displayName=C.Ee.displayName;let T=N.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(C.NY,{ref:t,className:(0,w.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...i})});T.displayName=C.NY.displayName;var E=s(4033),P=s(2621),_=s(2506);let F=_.fC;_.xz;let I=_.h_,O=N.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(_.aV,{className:(0,w.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...i,ref:t})});O.displayName=_.aV.displayName;let R=N.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsxs)(I,{children:[(0,a.jsx)(O,{}),(0,a.jsx)(_.VY,{ref:t,className:(0,w.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...i})]})});R.displayName=_.VY.displayName;let z=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,w.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};z.displayName="AlertDialogHeader";let D=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,w.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};D.displayName="AlertDialogFooter";let Z=N.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(_.Dx,{ref:t,className:(0,w.cn)("text-lg font-semibold",s),...i})});Z.displayName=_.Dx.displayName;let M=N.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(_.dk,{ref:t,className:(0,w.cn)("text-sm text-muted-foreground",s),...i})});M.displayName=_.dk.displayName;let U=N.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(_.aU,{ref:t,className:(0,w.cn)((0,i.d)(),s),...r})});U.displayName=_.aU.displayName;let V=N.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(_.$j,{ref:t,className:(0,w.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});V.displayName=_.$j.displayName;var L=s(4631);function Q(e){let{isOpen:t,onClose:s,onConfirm:i,title:r,description:n,confirmText:l="Continue",cancelText:o="Cancel",variant:c="warning"}=e;return(0,a.jsx)(F,{open:t,onOpenChange:s,children:(0,a.jsxs)(R,{children:[(0,a.jsxs)(z,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(L.Z,{className:"h-5 w-5 ".concat("danger"===c?"text-red-500":"text-yellow-500")}),(0,a.jsx)(Z,{children:r})]}),(0,a.jsx)(M,{className:"text-base",children:n})]}),(0,a.jsxs)(D,{children:[(0,a.jsx)(V,{children:o}),(0,a.jsx)(U,{onClick:i,className:"danger"===c?"bg-red-600 hover:bg-red-700":"",children:l})]})]})})}var K=s(7360),G=s(3082);function Y(){var e;let[t,s]=(0,N.useState)(!1),[b,w]=(0,N.useState)({newLogin:!0,usageAlerts:!0,newsletter:!1,marketing:!1}),[C,S]=(0,N.useState)({autoMask:!0,autoDownload:!1,saveOriginal:!0,highQuality:!1}),[_,F]=(0,N.useState)(null),[I,O]=(0,N.useState)({firstName:"",lastName:"",email:"",phone:""}),[R,z]=(0,N.useState)({emailNotifications:{newLogin:!0,usageAlerts:!0,newsletter:!1,marketing:!1},autoProcessing:{autoMask:!0,autoDownload:!1,saveOriginal:!0,highQuality:!1}}),[D,Z]=(0,N.useState)(!1),[M,U]=(0,N.useState)(!0),[V,L]=(0,N.useState)(!1),[Y,q]=(0,N.useState)(null),[H,J]=(0,N.useState)(""),[W,B]=(0,N.useState)(!1),{toast:X}=(0,P.pm)(),$=(0,E.useRouter)(),ee=(0,E.useSearchParams)(),et=ee.get("tab")||"account",es=(0,G.createClientComponentClient)(),{apiKey:ea,generateNewApiKey:ei,revokeApiKey:er,copyApiKey:en}=(0,K.Q)(),[el,eo]=(0,N.useState)(null);async function ec(){try{s(!0);let e=await fetch("/api/settings"),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to load profile");O({firstName:t.profile.firstName,lastName:t.profile.lastName,email:t.profile.email,phone:t.profile.phone}),z({emailNotifications:t.preferences.email_notifications||{newLogin:!0,usageAlerts:!0,newsletter:!1,marketing:!1},autoProcessing:t.preferences.auto_processing||{autoMask:!0,autoDownload:!1,saveOriginal:!0,highQuality:!1}}),L(t.preferences.two_factor_enabled||!1),t.preferences.two_factor_enabled&&(q(null),J(""))}catch(e){console.error("Error loading profile:",e),X({title:"Error",description:e instanceof Error?e.message:"Failed to load profile",variant:"destructive"})}finally{s(!1)}}async function ed(){try{s(!0);let e=await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:I,preferences:{email_notifications:b,auto_processing:C}})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to update settings");X({title:"Success",description:"Profile updated successfully"})}catch(e){console.error("Error updating profile:",e),X({title:"Error",description:"Failed to update profile",variant:"destructive"})}finally{s(!1)}}async function eu(e){e.preventDefault();let t=new FormData(e.currentTarget);t.get("currentPassword");let a=t.get("newPassword"),i=t.get("confirmPassword");if(a!==i){X({title:"Error",description:"New passwords do not match",variant:"destructive"});return}try{s(!0);let t=await fetch("/api/settings/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:a})}),i=await t.json();if(!t.ok)throw Error(i.error||"Failed to update password");X({title:"Success",description:"Password updated successfully"}),e.currentTarget.reset()}catch(e){console.error("Error updating password:",e),X({title:"Error",description:"Failed to update password",variant:"destructive"})}finally{s(!1)}}async function em(){try{s(!0);let e=await fetch("/api/settings/account",{method:"DELETE"}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to delete account");$.push("/"),X({title:"Success",description:"Your account has been deleted"})}catch(e){console.error("Error deleting account:",e),X({title:"Error",description:"Failed to delete account",variant:"destructive"})}finally{s(!1)}}async function ef(){if(!D)try{Z(!0),await ei(),U(!0)}catch(e){console.error("Error generating API key:",e),X({title:"Error",description:"Failed to generate API key",variant:"destructive"})}finally{Z(!1)}}async function eh(){await en()}async function ep(){if(!D)try{Z(!0),await er(),U(!1)}finally{Z(!1)}}async function ex(){try{await es.auth.signOut(),X({title:"Success",description:"You have been signed out successfully."}),$.push("/"),$.refresh()}catch(e){X({title:"Error",description:"Failed to sign out",variant:"destructive"})}}async function eg(){try{B(!0);let e=await fetch("/api/settings/2fa/setup",{method:"POST"}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to setup 2FA");q(t.qrCodeUrl)}catch(e){console.error("Error setting up 2FA:",e),X({title:"Error",description:"Failed to setup two-factor authentication",variant:"destructive"})}finally{B(!1)}}async function ev(){try{s(!0);let e=await fetch("/api/settings/2fa/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:H})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to verify 2FA");L(!0),q(null),J(""),X({title:"Success",description:"Two-factor authentication enabled successfully"})}catch(e){console.error("Error verifying 2FA:",e),X({title:"Error",description:"Failed to verify two-factor authentication",variant:"destructive"})}finally{s(!1)}}async function ey(){eo({isOpen:!0,title:"Disable Two-Factor Authentication",description:"Warning: This will remove an important security feature from your account. Are you sure you want to disable two-factor authentication?",variant:"danger",onConfirm:async()=>{try{s(!0);let e=await fetch("/api/settings/2fa/disable",{method:"POST"}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to disable 2FA");L(!1),X({title:"Success",description:"Two-factor authentication disabled successfully"})}catch(e){console.error("Error disabling 2FA:",e),X({title:"Error",description:"Failed to disable two-factor authentication",variant:"destructive"})}finally{s(!1),eo(null)}}})}function ej(e){z(t=>({...t,emailNotifications:{...t.emailNotifications,[e]:!t.emailNotifications[e]}}))}return(0,N.useEffect)(()=>{ec()},[ec]),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 md:py-12",children:[(0,a.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-700 via-blue-800 to-indigo-800 dark:from-blue-400 dark:via-blue-300 dark:to-blue-200",children:"Settings"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account settings and preferences"})]}),(0,a.jsxs)(c.Tabs,{defaultValue:et,className:"relative space-y-6",children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 pb-4",children:(0,a.jsxs)(c.TabsList,{className:"w-full grid grid-cols-2 sm:grid-cols-4 gap-1 rounded-lg bg-muted p-1 h-auto",children:[(0,a.jsxs)(c.TabsTrigger,{value:"account",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2 h-auto py-2.5 px-3 transition-all duration-200",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Account"})]}),(0,a.jsxs)(c.TabsTrigger,{value:"notifications",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2 h-auto py-2.5 px-3 transition-all duration-200",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Notifications"})]}),(0,a.jsxs)(c.TabsTrigger,{value:"security",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2 h-auto py-2.5 px-3 transition-all duration-200",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Security"})]}),(0,a.jsxs)(c.TabsTrigger,{value:"team",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2 h-auto py-2.5 px-3 transition-all duration-200",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Team"})]})]})}),(0,a.jsxs)(c.TabsContent,{value:"account",className:"space-y-6",children:[(0,a.jsxs)(r.Zb,{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Personal Information"}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"firstName",children:"First name"}),(0,a.jsx)(n.I,{id:"firstName",value:I.firstName,onChange:e=>O(t=>({...t,firstName:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"lastName",children:"Last name"}),(0,a.jsx)(n.I,{id:"lastName",value:I.lastName,onChange:e=>O(t=>({...t,lastName:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"email",children:"Email"}),(0,a.jsx)(n.I,{id:"email",type:"email",value:I.email,disabled:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"phone",children:"Phone"}),(0,a.jsx)(n.I,{id:"phone",type:"tel",value:I.phone,onChange:e=>O(t=>({...t,phone:e.target.value})),placeholder:"+1 (555) 000-0000"})]})]})]}),(0,a.jsx)(k,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Processing Preferences"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"Automatic License Plate Masking"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically mask license plates when uploading images"})]}),(0,a.jsx)(o.r,{checked:null==C?void 0:C.autoMask,onCheckedChange:e=>S(t=>({...t,autoMask:e})),disabled:t})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"Auto-Download"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically download processed images"})]}),(0,a.jsx)(o.r,{checked:null==C?void 0:C.autoDownload,onCheckedChange:e=>S(t=>({...t,autoDownload:e}))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"Save Original Images"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Keep original images in your account"})]}),(0,a.jsx)(o.r,{checked:null==C?void 0:C.saveOriginal,onCheckedChange:e=>S(t=>({...t,saveOriginal:e}))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"High Quality Processing"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use higher quality settings for better results"})]}),(0,a.jsx)(o.r,{checked:null==C?void 0:C.highQuality,onCheckedChange:e=>S(t=>({...t,highQuality:e}))})]})]})]}),(0,a.jsx)(k,{}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(i.z,{variant:"outline",onClick:()=>ec(),disabled:t,children:"Cancel"}),(0,a.jsx)(i.z,{onClick:ed,disabled:t,children:t?"Saving...":"Save Changes"})]})]}),(0,a.jsx)(r.Zb,{className:"p-6 border-destructive/50",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Danger Zone"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Delete Account"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account and all data"})]}),(0,a.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:em,disabled:t,children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Delete Account"]})]})]})})]}),(0,a.jsx)(c.TabsContent,{value:"notifications",className:"space-y-6",children:(0,a.jsxs)(r.Zb,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Email Notifications"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"Security Alerts"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified about new login attempts"})]}),(0,a.jsx)(o.r,{checked:null==b?void 0:b.newLogin,onCheckedChange:e=>ej("newLogin")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"Usage Alerts"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when approaching usage limits"})]}),(0,a.jsx)(o.r,{checked:null==b?void 0:b.usageAlerts,onCheckedChange:e=>ej("usageAlerts")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"Newsletter"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive our monthly newsletter"})]}),(0,a.jsx)(o.r,{checked:null==b?void 0:b.newsletter,onCheckedChange:e=>ej("newsletter")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"Marketing"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive marketing communications"})]}),(0,a.jsx)(o.r,{checked:null==b?void 0:b.marketing,onCheckedChange:e=>ej("marketing")})]})]})]})}),(0,a.jsx)(c.TabsContent,{value:"security",className:"space-y-6",children:(0,a.jsxs)(r.Zb,{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Password"}),(0,a.jsxs)("form",{onSubmit:eu,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"currentPassword",children:"Current password"}),(0,a.jsx)(n.I,{id:"currentPassword",name:"currentPassword",type:"password"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"newPassword",children:"New password"}),(0,a.jsx)(n.I,{id:"newPassword",name:"newPassword",type:"password"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"confirmPassword",children:"Confirm new password"}),(0,a.jsx)(n.I,{id:"confirmPassword",name:"confirmPassword",type:"password"})]}),(0,a.jsx)(i.z,{type:"submit",disabled:t,children:t?"Updating...":"Update Password"})]})]}),(0,a.jsx)(k,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Two-Factor Authentication"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Two-Factor Authentication"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add an extra layer of security to your account"})]}),V?(0,a.jsx)(i.z,{variant:"destructive",onClick:ey,disabled:t,children:"Disable"}):(0,a.jsx)(i.z,{variant:"outline",onClick:eg,disabled:t||W,children:W?"Setting up...":"Enable"})]}),Y&&(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-muted rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"font-medium",children:"Scan QR Code"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Scan this QR code with your authenticator app"}),(0,a.jsx)("div",{className:"flex justify-center p-4 bg-white rounded-lg",children:(0,a.jsx)("img",{src:Y,alt:"2FA QR Code",className:"w-48 h-48"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{htmlFor:"verificationCode",children:"Verification Code"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.I,{id:"verificationCode",value:H,onChange:e=>J(e.target.value),placeholder:"Enter 6-digit code",maxLength:6}),(0,a.jsx)(i.z,{onClick:ev,disabled:6!==H.length||t,children:t?"Verifying...":"Verify"})]})]})]})]})]}),(0,a.jsx)(k,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"API Keys"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"API Access"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your API keys for programmatic access"})]}),ea?(0,a.jsxs)(i.z,{variant:"destructive",onClick:ep,disabled:D,children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),D?"Revoking...":"Revoke Key"]}):(0,a.jsxs)(i.z,{onClick:ef,disabled:D,children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),D?"Generating...":"Generate Key"]})]}),ea&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"p-4 bg-muted rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("code",{className:"text-sm font-mono break-all",children:M?ea:"•".repeat(40)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:()=>U(!M),disabled:D,children:[M?(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}):(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),M?"Hide":"Show"]}),(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:eh,disabled:D||!M,children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Copy"]})]})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l._,{children:"Example Usage"}),(0,a.jsx)("div",{className:"p-4 bg-muted rounded-lg",children:(0,a.jsxs)("code",{className:"text-sm font-mono break-all",children:["curl -X POST https://api.maskingtech.com/process-image \\",(0,a.jsx)("br",{}),'\xa0\xa0-H "Authorization: Bearer ',M?ea:"•".repeat(40),'" \\',(0,a.jsx)("br",{}),'\xa0\xa0-F "image=@photo.jpg"']})})]})]})]})]}),(0,a.jsx)(k,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Active Sessions"}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,a.jsx)(v.Z,{className:"h-4 w-4 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Current Session"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last active: Just now"})]})]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:ex,children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})})]})]})}),(0,a.jsxs)(c.TabsContent,{value:"team",className:"space-y-6",children:[(0,a.jsx)(r.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Team Members"}),(0,a.jsxs)(i.z,{children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Invite Member"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:[{name:(null==_?void 0:null===(e=_.user_metadata)||void 0===e?void 0:e.full_name)||(null==_?void 0:_.email),email:null==_?void 0:_.email,role:"Owner"}].map((e,t)=>{var s,r;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(A,{children:(0,a.jsx)(T,{children:e.name?e.name.split(" ").map(e=>e[0]).join(""):(null===(r=e.email)||void 0===r?void 0:null===(s=r[0])||void 0===s?void 0:s.toUpperCase())||"U"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e.role}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})})]})]},t)})})]})}),(0,a.jsx)(r.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Team Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"Require Approval"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Require admin approval for new member invitations"})]}),(0,a.jsx)(o.r,{defaultChecked:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(l._,{children:"Member Permissions"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow members to invite other members"})]}),(0,a.jsx)(o.r,{})]})]})]})})]})]})]}),el&&(0,a.jsx)(Q,{isOpen:el.isOpen,onClose:()=>eo(null),onConfirm:el.onConfirm,title:el.title,description:el.description,variant:el.variant,confirmText:"Disable 2FA",cancelText:"Cancel"})]})}},3023:function(e,t,s){"use strict";s.d(t,{d:function(){return o},z:function(){return c}});var a=s(7437),i=s(2265),r=s(7256),n=s(9213),l=s(9311);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:s,variant:i,size:n,asChild:c=!1,...d}=e,u=c?r.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:i,size:n,className:s})),ref:t,...d})});c.displayName="Button"},6110:function(e,t,s){"use strict";s.d(t,{Zb:function(){return n}});var a=s(7437),i=s(2265),r=s(9311);let n=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});n.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...i})});l.displayName="CardHeader";let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});o.displayName="CardTitle";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...i})});c.displayName="CardDescription";let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...i})});d.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...i})});u.displayName="CardFooter"},1908:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(7437),i=s(2265),r=s(9311);let n=i.forwardRef((e,t)=>{let{className:s,type:i,...n}=e;return(0,a.jsx)("input",{type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});n.displayName="Input"},6672:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var a=s(7437),i=s(2265),r=s(6743),n=s(9213),l=s(9311);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.f,{ref:t,className:(0,l.cn)(o(),s),...i})});c.displayName=r.f.displayName},8257:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var a=s(7437),i=s(2265),r=s(2376),n=s(9311);let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...i,ref:t,children:(0,a.jsx)(r.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=r.fC.displayName},7579:function(e,t,s){"use strict";s.r(t),s.d(t,{Tabs:function(){return l},TabsContent:function(){return d},TabsList:function(){return o},TabsTrigger:function(){return c}});var a=s(7437),i=s(2265),r=s(4522),n=s(9311);let l=r.fC,o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.aV,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...i})});o.displayName=r.aV.displayName;let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.xz,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...i})});c.displayName=r.xz.displayName;let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.VY,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...i})});d.displayName=r.VY.displayName},7360:function(e,t,s){"use strict";s.d(t,{Q:function(){return r}});var a=s(2265),i=s(2621);function r(){let[e,t]=(0,a.useState)(!0),[s,r]=(0,a.useState)({imagesProcessed:0,monthlyQuota:100,lastUploadTime:null,detectedPlates:0}),[n,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),{toast:x}=(0,i.pm)(),g=(0,a.useCallback)(async()=>{t(!0);try{var e,s,a,i;let t=await fetch("/api/dashboard"),n=await t.json();if(!t.ok)throw Error(n.error||"Failed to fetch dashboard data");r({imagesProcessed:(null===(e=n.stats)||void 0===e?void 0:e.images_processed)||0,monthlyQuota:(null===(s=n.stats)||void 0===s?void 0:s.monthly_quota)||100,lastUploadTime:null===(a=n.stats)||void 0===a?void 0:a.last_upload_time,detectedPlates:(null===(i=n.stats)||void 0===i?void 0:i.detected_plates)||0}),l((n.recentActivity||[]).map(e=>({id:e.id,filename:e.filename,processedAt:e.processed_at,licensePlatesDetected:e.license_plates_detected,thumbnailUrl:e.thumbnail_url,processedUrl:e.processed_url}))),n.apiKey&&c(n.apiKey.key)}catch(e){console.error("Error fetching dashboard data:",e),x({title:"Error",description:"Failed to load dashboard data",variant:"destructive"})}finally{t(!1)}},[x]),v=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/auth/session",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok){if(401===e.status){u(!1),f(null);return}throw Error("Failed to check authentication")}let t=await e.json(),s=t.session;u(!!s),(null==s?void 0:s.user)?(f({id:s.user.id,email:s.user.email,user_metadata:s.user.user_metadata}),g()):f(null)}catch(e){console.error("Auth error:",e),x({title:"Authentication Error",description:"Failed to verify authentication status",variant:"destructive"}),u(!1),f(null)}},[g,x]);(0,a.useEffect)(()=>{v()},[v]);let y=async()=>new Promise((e,t)=>{p({isOpen:!0,title:"Generate New API Key",description:"Warning: Generating a new API key will invalidate your existing key. Any applications or scripts using the current key will stop working. Are you sure you want to continue?",variant:"warning",onConfirm:async()=>{try{let t=await fetch("/api/dashboard/api-key",{method:"POST"}),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to generate API key");c(s.apiKey.key),x({title:"Success",description:"New API key generated successfully. Make sure to copy it now - you won't be able to see it again."}),p(null),e(s.apiKey.key)}catch(e){console.error("Error generating API key:",e),x({title:"Error",description:"Failed to generate new API key",variant:"destructive"}),p(null),t(e)}}})}),j=async()=>new Promise((e,t)=>{p({isOpen:!0,title:"Revoke API Key",description:"Warning: This will permanently revoke your API key. Any applications or scripts using this key will stop working immediately. Are you sure you want to continue?",variant:"danger",onConfirm:async()=>{try{let t=await fetch("/api/dashboard/api-key",{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to revoke API key")}c(null),x({title:"Success",description:"API key has been revoked successfully"}),p(null),e(!0)}catch(e){console.error("Error revoking API key:",e),x({title:"Error",description:"Failed to revoke API key",variant:"destructive"}),p(null),t(e)}}})}),N=async()=>{if(o)try{await navigator.clipboard.writeText(o),x({title:"Success",description:"API key copied to clipboard"})}catch(e){x({title:"Error",description:"Failed to copy API key",variant:"destructive"})}};return{isLoading:e,stats:s,recentActivity:n,apiKey:o,isAuthenticated:d,user:m,generateNewApiKey:y,revokeApiKey:j,copyApiKey:N,refreshData:g,alertState:h,closeAlert:()=>{p(null)}}}},2621:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(2265);let i=0,r=new Map,n=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},5e3);r.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9311:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(7042),i=s(4769);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,a.W)(t))}}},function(e){e.O(0,[895,732,875,482,20,971,864,744],function(){return e(e.s=4566)}),_N_E=e.O()}]);